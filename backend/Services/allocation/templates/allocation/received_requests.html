<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Received Requests</title>
</head>
<body>
    <h2>Your Received Room Change Requests</h2>

    {% if has_pending_warden_request %}
        <p>You have pending requests awaiting approval by the warden. You cannot accept or reject new requests at this time.</p>
    {% endif %}

    <ul>
        {% for request in received_requests %}
            <li>
                Request from {{ request.requested_by.user.username }} to swap with you for room {{ request.room.name }}.

                <form method="POST" style="display:inline;">
                    {% csrf_token %}
                    <input type="hidden" name="request_id" value="{{ request.id }}">
                    
                    {% if not has_pending_warden_request %}
                        <button type="submit" name="accept">Accept</button>
                    {% endif %}
                    
                    <button type="submit" name="reject" {% if has_pending_warden_request %} disabled {% endif %}>Reject</button>
                </form>
            </li>
        {% empty %}
            <p>No requests found.</p>
        {% endfor %}
    </ul>
</body>
</html>
